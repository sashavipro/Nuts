{% extends "base.html" %}
{% load i18n wagtailcore_tags %}

{% block body_class %}page inside{% endblock %}

{% block content %}
<section class="profile-section" style="padding: 60px 0; background: #fff; min-height: 50vh;">
    <div class="container">

        <div class="d-flex justify-content-between align-items-center flex-wrap mb-5">
            <h1 style="color: #1a2f3a; margin: 0; font-weight: 800; font-size: 36px;">{% trans "Учетная запись" %}</h1>
            <div class="manager-info d-flex flex-column" style="font-size: 14px; color: #555; border-left: 1px solid #eee; padding-left: 20px;">
                <span>{{ page.manager_title }}</span>
                <span style="color: #3d8063; font-weight: 700; display: flex; align-items: center; gap: 5px;">
                    <i class="nut-icon icons-telephone"></i> {{ page.manager_phone }}
                </span>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-3 col-md-4">
                {% include "users/includes/profile_sidebar.html" %}
            </div>

            <div class="col-lg-9 col-md-8">
                {% if transactions %}
                    <div class="cart-table-wrapper">
                        <div class="cart-table-header d-none d-md-flex" style="border-bottom: 1px solid #f0f0f0; padding-bottom: 15px; font-size: 14px; font-weight: 700; color: #1a2f3a;">
                            <div style="flex: 2; padding-left: 20px;">{% trans "Добавлено" %} <i class="nut-icon icons-arrow-down" style="font-size: 10px; color: #888;"></i></div>
                            <div style="flex: 2; text-align: center;">{% trans "Статус" %} <i class="nut-icon icons-arrow-down" style="font-size: 10px; color: #888;"></i></div>
                            <div style="flex: 2; text-align: right; padding-right: 40px;">{% trans "Сумма" %} <i class="nut-icon icons-arrow-down" style="font-size: 10px; color: #888;"></i></div>
                        </div>

                        {% for tr in transactions %}
                        <div class="cart-table-row d-flex flex-column flex-md-row align-items-md-center" style="padding: 20px 0; border-bottom: 1px solid #f0f0f0; {% if forloop.counter|divisibleby:2 %}background-color: #f2f7f4;{% endif %}">
                            <div style="flex: 2; font-size: 14px; padding-left: 20px; color: #555;">{{ tr.created_at|date:"d.m.Y" }}</div>
                            <div style="flex: 2; text-align: center; font-size: 14px; color: #1a2f3a;">{% trans "Платеж принят" %}</div>
                            <div style="flex: 2; text-align: right; font-size: 15px; font-weight: 600; padding-right: 20px; display: flex; justify-content: flex-end; align-items: center; gap: 20px;">
                                {{ tr.amount }} {% trans "грн." %}

                                <a href="#" hx-get="{{ page.url }}transaction/{{ tr.id }}/" hx-target="#modal-container" style="color: #3d8063; font-size: 20px; text-decoration: none; display: flex; align-items: center;" title="{% trans 'Детали' %}">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
        <circle cx="12" cy="12" r="3"></circle>
    </svg>
</a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div style="background: #f9f9f9; padding: 40px; text-align: center; border-radius: 5px;">
                        <p style="font-weight: 700; color: #1a2f3a; margin: 0;">{% trans "У вас не было транзакций!" %}</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    <div id="modal-container"></div>
</section>

{% for block in page.footer_blocks %}
    {% include_block block %}
{% endfor %}
{% endblock %}
